# Schedule Service

---
## 1. Schedule Service ๋
### 1.1. ์์

>๋ฑ๋ก๋ DB ์๋น์ค, Custom ์๋น์ค๋ฅผ ํน์์๊ฐ, ๋ฐ๋ณต ์คํ์ด ํ์ํ๋ ์ฌ์ฉ

## 2. ์ฌ์ฉ๋ฒ
### 2.1. ์์ฑ

๐ __menu > ์๋น์ค > Schedule Service > ์์ฑ__

<img src = "./images/02-service-schedule-01.png" width = "750px"> </img>

### 2.2. ์์ฑ

<img src = "./images/02-service-schedule-01-2.png" width = "600px"> </img>

| ๊ตฌ๋ถ | ์ค๋ช |
|:--:|:--|
| Schedule ์๋น์ค ID | ๊ณ์ํ ID(์ค๋ณต ๋ถ๊ฐ, ์์ด, ์ซ์, underscore('_') 5์ ์ด์ 50์ ์ด๋ด |
| Schedule ์๋น์ค๋ช | ์ด๋ฆ, ํน์ ์ค๋ช์๋ฅ, ์์์๊ฐ ๊ตฌ๋ถํ๊ธฐ ์ํด ์ฌ์ฉ |
| ๊ทธ๋ฃน | ์์์๊ฐ ๊ตฌ๋ถํ๊ธฐ ์ํด ์ฌ์ฉ |
| ๊ตฌ๋ถ | Java class ํ์ผ, DB Service ์ํ |
| ์ํ | ์๋น์ค ์ฌ์ฉ ์ํ ๊ตฌ๋ถ, ํ์ฑ / ๋นํ์ฑ ์ํํ์ฌ ์ฌ์ฉ ์ํ๊ฐ๋ฅ |
| ํด๋์ค๋ช<br/>๊ตฌ๋ถ: Java class ํ์ผ ์ผ๋ | ์คํ๋ ํด๋์คํ์ผ ์ง์ |
| ์คํ๋ ์๋ฒ | ๋ง๋ค์ด์ง ์๋น์ค๊ฐ ์คํ๋ ์๋ฒ ์ง์ |
| Cron Exp | ์คํ ์ฃผ๊ธฐ ์ค์ |


#### 2.2.1. DB Service ID

<img src = "./images/02-service-schedule-01-3.png" width = "550px"> </img>

- __DB Service ID ์ํ ์__
	- "DB Service" ๋ platform์ ๋ฑ๋ก๋ DB Service๋ฅผ ํธ์ถํ๋ ๋ฐฉ์  
	- Schedule ์๋น์ค๋ ์๋์ผ๋ก ์คํ๋๋ ์๋น์ค ์ด๋ฏ๋ก ์๋ฅ๊ฐ์ด ํ์์๋ DB Service๋ฅผ ๋ง๋ค์ด ์ฌ์ฉ


#### 2.2.2. JAVA class ํ์ผ
- __๊ตฌ๋ถ - JAVA class ํ์ผ ์ํ ์__
	- "Java class ํ์ผ" ์ org.quartz.Job์ interface๋ฅผ ์ฌ์ฉํ์ฌ ๋น๋ํด์ผ ๋ง ์์ ์๋  
	- ๋งค๋ด์ผ ์ฐธ์กฐ ๋ฐ  ์ํํ์ผ ์ฐธ๊ณ  
	- ๋ฑ๋ก์ด๋ ์์์์ ๋ฐ๋์ class ํ์ผ์ด platform ๋ด๋ถ์ ๋จผ์ ์กด์ฌ ํด์ผ ๊ฐ๋ฅ

```java
Schedule ์๋น์ค์ ๋ฑ๋ก๋ JAVA ๊ธฐ๋ณธ ๊ตฌ์กฐ

...

import org.quartz.JobDataMap;
import org.quartz.JobDetail;
import org.quartz.JobExecutionContext;
import org.quartz.StatefulJob;

...

public class CronSample implements StatefulJob {
    public void execute(JobExecutionContext context) {
        ...
    }
}
```

---
## 3. ๋ณ์ฒจ
### 3.1. Cron exp

```
1 Seconds (0โ59)
2 Minutes (0โ59)
3 Hours (0โ23)
4 Day of month (1โ31)
5 Month (1โ12 or JANโDEC)
6 Day of week (1โ7 or SUNโSAT)
7 Year (1970โ2099)

*๋ all, ?๋ ์ค์์ํจ.
examples..

0 0 10 * * ?
๋งค์ผ ์ค์ 10์์ ์คํ

0 0 10 1 * ?
๋งค์ 1์ผ ์ค์ 10์์ ์คํ

0 0 10 ? ? 1 ?
๋งค์ฃผ ์ผ์์ผ ์ค์ 10์์ ์คํ

0/5 * * * * ?
5์ด๋ง๋ค ์คํ

ํ๋ ํ์ฉ๋ฒ์ ํ์ฉ๋ฌธ์
์ด 0-59 , โ * / 
๋ถ 0-59 , โ * / 
์ 0-23 , โ * / 
์ผ 1-31 , โ * ? / L W
์ 1-12 or JAN-DEC , โ * / 
์์ผ 1-7 or SUN-SAT , โ * ? / L # 
๋(์ต์) 1970-2099 , โ * /

* ๋ชจ๋ ๊ฐ
? ํน์ ๊ฐ ์์
- ๋ฒ์ ์ง์์ ์ฌ์ฉ
, ์ฌ๋ฌ ๊ฐ ์ง์ ๊ตฌ๋ถ์ ์ฌ์ฉ
/ ์ด๊ธฐ๊ฐ๊ณผ ์ฆ๊ฐ์น ์ค์์ ์ฌ์ฉ
L ์ง์ํ ์ ์๋ ๋ฒ์์ ๋ง์ง๋ง ๊ฐ
W ์~๊ธ์์ผ ๋๋ ๊ฐ์ฅ ๊ฐ๊น์ด ์/๊ธ์์ผ
# ๋ช ๋ฒ์งธ ๋ฌด์จ ์์ผ 2#1 => ์ฒซ ๋ฒ์งธ ์์์ผ

์์) 
Expression Meaning 
์ด๋ถ์์ผ์์ฃผ(๋)
โ0 0 12 * * ?โ ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ 12:00:00
โ0 15 10 ? * *โ ๋ชจ๋ ์์ผ, ๋งค์, ์๋ฌด ๋์ด๋ 10:15:00 
โ0 15 10 * * ?โ ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ 10:15:00 
โ0 15 10 * * ? *โ ๋ชจ๋ ์ฐ๋, ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ 10:15 
โ0 15 10 * * ? 2005โณ 2005๋ ์๋ฌด ์์ผ์ด๋ ๋งค์, ๋งค์ผ 10:15 
โ0 * 14 * * ?โ ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ, 14์ ๋งค๋ถ 0์ด 
โ0 0/5 14 * * ?โ ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ, 14์ ๋งค 5๋ถ๋ง๋ค 0์ด 
โ0 0/5 14,18 * * ?โ ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ, 14์, 18์ ๋งค 5๋ถ๋ง๋ค 0์ด 
โ0 0-5 14 * * ?โ ์๋ฌด ์์ผ, ๋งค์, ๋งค์ผ, 14:00 ๋ถํฐ ๋งค 14:05๊น์ง ๋งค ๋ถ 0์ด 
โ0 10,44 14 ? 3 WEDโ 3์์ ๋งค ์ฃผ ์์์ผ, ์๋ฌด ๋์ง๋ 14:10:00, 14:44:00 
โ0 15 10 ? * MON-FRIโ ์~๊ธ, ๋งค์, ์๋ฌด ๋์ด๋ 10:15:00 
โ0 15 10 15 * ?โ ์๋ฌด ์์ผ, ๋งค์ 15์ผ 10:15:00 
โ0 15 10 L * ?โ ์๋ฌด ์์ผ, ๋งค์ ๋ง์ง๋ง ๋ 10:15:00 
โ0 15 10 ? * 6Lโ ๋งค์ ๋ง์ง๋ง ๊ธ์์ผ ์๋ฌด ๋์ด๋ 10:15:00 
โ0 15 10 ? * 6L 2002-2005โณ
2002๋๋ถํฐ 2005๋๊น์ง ๋งค์ ๋ง์ง๋ง ๊ธ์์ผ ์๋ฌด ๋์ด๋ 10:15:00 
โ0 15 10 ? * 6#3โณ ๋งค์ 3๋ฒ์งธ ๊ธ์์ผ ์๋ฌด ๋์ด๋ 10:15:00

โ?โ์ โ*โ์ ์ฐจ์ด๋ฅผ ๊ตฌ๋ถํ๊ธฐ๊ฐ ์ด๋ต์ต๋๋ค. ๊ทธ๋ฅ โ?โ๋ ํ ๊ฐ๋ง ์ฌ์ฉํ๋ ๊ฒ์ผ๋ก ์๊ฐํ์๋ฉด ๋ฉ๋๋ค
```